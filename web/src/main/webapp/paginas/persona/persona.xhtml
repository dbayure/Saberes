<?xml version="1.0" encoding="UTF-8"?>

<!-- 
SABERES - Registro de conocimientos, aptitudes del personal de la empresa
Copyright (C) 2009  ANTEL
This file is part of SABERES.
SABERES is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.
This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.
You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
 
!-->
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/default.xhtml">
	<ui:define id="ui" name="content">

		<h:form id="form" prependId="false" enctype="multipart/form-data">
			<h3 class="text-muted">Administrar Usuarios del sistema</h3>
			<br />
			<p:growl id="msgs" showDetail="false" />
			<p:messages id="messages" showDetail="false" showSummary="true"
				autoUpdate="true" closable="true" />

			<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
				<h:panelGrid columns="2" style="margin: 0 auto;" cellpadding="15">
					<p:commandButton value="Si" type="button"
						styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
					<p:commandButton value="No" type="button"
						styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
				</h:panelGrid>
			</p:confirmDialog>
			
			<hr color="#0080ff" size="1" />
			<div class="ui-fluid">
   				<p:panelGrid columns="8" layout="grid" styleClass="ui-panelgrid-blank" 
   				columnClasses="ui-grid-col-1,ui-grid-col-2,ui-grid-col-1,ui-grid-col-2,ui-grid-col-1,ui-grid-col-2,ui-grid-col-1,ui-grid-col-2"	>
			        <p:outputLabel for="nombre" value="Nombre:"/>
			        <p:inputText id="nombre" value="#{newPersona.nombre}" required="true" requiredMessage="Campo requeido, debe ingresar un valor para el nombre"/>
			        <p:outputLabel for="apellido" value="Apellido:"/>
			        <p:inputText id="apellido" value="#{newPersona.apellido}" required="true" requiredMessage="Campo requeido, debe ingresar un valor para el apellido"/>
			        <p:outputLabel for="sexo" value="Sexo:"/>
			        <p:selectOneMenu id="sexo" value="#{newPersona.sexo}" >
						<f:selectItem itemLabel="Selecione..." itemValue="" />
			            <f:selectItem itemLabel="Femenino" itemValue="Femenino" />
			            <f:selectItem itemLabel="Masculino" itemValue="Masculino" />
					</p:selectOneMenu>
			        <p:outputLabel for="fnac" value="Cumpleaños:"/>
			        <p:calendar id="fnac" value="#{newPersona.fechaNacimiento}"/>
			        <p:outputLabel for="cel" value="Celular:"/>
        			<p:inputMask id="cel" mask="(099)-999999" value="#{newPersona.telCelular}"/>
        			<p:outputLabel for="clase" value="Clase:"/>
			        <p:inputText id="clase" value="#{newPersona.clase}"/>
			        <p:outputLabel for="descClase" value="Dsc.Clase:"/>
			        <p:inputText id="descClase" value="#{newPersona.descClase}"/>			        
        			<p:outputLabel for="situacion" value="Situación:"/>
			        <p:inputText id="situacion" value="#{newPersona.situacion}"/>
			        <p:outputLabel for="regimen" value="Regimen:"/>
			        <p:inputText id="regimen" value="#{newPersona.regimen}"/>
			        <p:outputLabel for="jornadaLaboral" value="Jornada:"/>
			        <p:inputText id="jornadaLaboral" value="#{newPersona.jornadaLaboral}"/>
			        <p:outputLabel for="departamento" value="Depto:"/>
			        <p:inputText id="departamento" value="#{newPersona.departamento}"/>			        
        			<p:outputLabel for="localidad" value="Localidad:"/>
			        <p:inputText id="localidad" value="#{newPersona.localidad}"/>
			        <p:outputLabel for="correo" value="Correo:"/>
			        <p:inputText id="correo" value="#{newPersona.correo}"/>
        			<p:outputLabel for="division" value="División:"/>
			        <p:inputText id="division" value="#{newPersona.division}"/>
			        <p:outputLabel for="descDivision" value="Dsc.División:"/>
			        <p:inputText id="descDivision" value="#{newPersona.descDivision}"/>			        
        			<p:outputLabel for="area" value="Área:"/>
			        <p:inputText id="area" value="#{newPersona.area}"/>
			        <p:outputLabel for="unidad" value="Unidad:"/>
			        <p:inputText id="unidad" value="#{newPersona.unidad}"/>			
			        <p:outputLabel for="piso" value="Piso:"/>
			        <p:inputText id="piso" value="#{newPersona.piso}"/>
			        <p:outputLabel for="oficina" value="Oficina:"/>
			        <p:inputText id="oficina" value="#{newPersona.oficina}"/>			        
        			<p:outputLabel for="telDirecto" value="Directo:"/>
			        <p:inputMask id="telDirecto" mask="99999999" value="#{newPersona.telDirecto}"/>
			        <p:outputLabel for="telInterno" value="Interno:"/>
			        <p:inputMask id="telInterno" mask="99999999" value="#{newPersona.telInterno}"/>
        			<p:outputLabel for="fax" value="Fax:"/>
			        <p:inputMask id="fax" mask="99999999" value="#{newPersona.fax}"/>
			        <p:outputLabel for="profesion" value="Profesión:"/>
			        <p:inputText id="profesion" value="#{newPersona.profesion}"/>			        
        			<p:outputLabel for="direccion" value="Dirección:"/>
			        <p:inputText id="direccion" value="#{newPersona.direccion}"/>
			        <p:outputLabel for="usuario" value="Usuario:"/>
			        <p:inputText id="usuario" value="#{newPersona.usuario}" required="true" requiredMessage="Campo requerido, debe ingresar un valor para el usuario"/>
			        <p:outputLabel for="password1" value="Contraseña:"/>
			        <p:password id="password1" value="#{newPersona.password}" required="true" match="password2" validatorMessage="Error de validación, las contraseñas no coinciden"/>		
			        <p:outputLabel for="password2" value="Contraseña:"/>
			        <p:password id="password2" value="#{newPersona.password}" required="true" />
			        <p:outputLabel for="roles" value="Rol:"/>
			       	<p:selectOneMenu id="roles" value="#{newPersona.rol}" required="true" requiredMessage="Campo requerido, debe ingresar un valor para el rol">
						<f:converter converterId="rolConverter" />
						<f:selectItem itemLabel="Seleccione..." itemValue="" />
						<f:selectItems value="#{roles}" var="_rol" itemLabel="#{_rol.rol}" itemValue="#{_rol}" />
					</p:selectOneMenu>
			     </p:panelGrid>
			     <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank"	columnClasses="ui-grid-col-10,ui-grid-col-2">
			        <p:outputLabel for="registrar" value=""/>
			     	<p:commandButton id="registrar" value="Registrar" action="#{personaBean.registrar(newPersona.usuario)}" update="form"/>			        		                			        
   				</p:panelGrid>
			</div>
			<hr color="#0080ff" size="1" />
			<p:dataTable id="usuarios" var="_usuarios" value="#{personas}" emptyMessage="No existen datos a mostrar." 
						 rows="10" editable="true" reflow="true" style="text-align: center; ">

				<f:facet name="header">
					<p class="text-muted">Usuario Del Sistema</p>
				</f:facet>

				<p:column headerText="Id">
					<h:outputText value="#{_usuarios.id}" style="text-transform: capitalize; width:10%" />
				</p:column>
				
				<p:column headerText="Nombre">
					<h:outputText value="#{_usuarios.nombre}" style="text-transform: capitalize" />
				</p:column>

				<p:column headerText="Apellido">
					<h:outputText value="#{_usuarios.apellido}" style="text-transform: capitalize" />
				</p:column>

				<p:column headerText="Usuario">
					<h:outputText value="#{_usuarios.usuario}"/>
				</p:column>
				
				<p:column headerText="Rol">
					<h:outputText value="#{_usuarios.rol.rol}"/>
				</p:column>

				<p:column style="text-transform: capitalize;" headerText="Eliminar">
					<p:commandButton id="eliminarUsuario" update="usuarios :msgs :messages" immediate="true"
						action="/Saberes-web/paginas/persona/persona.jsf?faces-redirect=true"
						ajax="true" resetValues="true" value="Eliminar"	actionListener="#{personaBean.eliminar(_usuarios.id)}"
						icon="ui-icon-trash">
						<p:confirm header="Confirmación" message="Esta seguro que desea eliminar el saber" icon="ui-icon-alert" />
					</p:commandButton>
				</p:column>

			</p:dataTable>
			<br />
		</h:form>
		<hr color="#0080ff" size="1" />

	</ui:define>
</ui:composition>
